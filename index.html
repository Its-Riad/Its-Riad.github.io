<!DOCTYPE html>
<html>
<head>    
    <link rel="stylesheet" type="text/css" href="index.css">
    <title>My Portfolio</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <style>
        #chartGrid {
            display: flex;
        }
    </style>
</head>
<body> 
    <h1 class="big" style="margin-bottom: 0px;">Your name</h1>
    <p style="margin-top: 0px; color: darkblue">
        Your Name | <a href="https://www.linkedin.com/in/YOUR_LINKEDIN/">LinkedIn</a> | <a href="https://www.github.com/YOUR_GITHUB">GitHub</a>
    </p>
    <h3 class="small">
        This page acts as your portfolio of charts. You can use it as a good starting point to display your work but make sure to customise it to make it your own, or even start from scratch.  
    </h3>

    <section>
        <div class="chart-description">
            <h2>Section 1: A basic chart</h2>
            <p>
                We've organised the page into sections, with each section containing a chart, title and a description. Here, we can describe the chart and give some context.
                As a first example, we're using a basic chart from our repo.
            </p>
        </div>
        <figure id="Location1"></figure>
    </section>
    <section>
        <div class="chart-description">
            <h2>Section 2: London Transport Map</h2>
            <p>
                This interactive map shows London boroughs and Underground lines. Each line is color-coded using Transport for London's branding.
            </p>
        </div>
        <figure id="londonMap"></figure>
    </section>

    <script>
        // Embed Graph 1 (basic chart)
        let figure_1_spec = "https://raw.githubusercontent.com/EconomicsObservatory/courses/main/2/s2_chart2.json";
        vegaEmbed('#Location1', figure_1_spec);

        // Embed Graph 2 (London Transport Map)
        let londonMapSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "width": 700,
            "height": 500,
            "view": { "stroke": "transparent" },
            "layer": [
                {
                    "data": {
                        "url": "data/londonBoroughs.json",
                        "format": { "type": "topojson", "feature": "boroughs" }
                    },
                    "mark": { "type": "geoshape", "stroke": "white", "strokeWidth": 2 },
                    "encoding": { "color": { "value": "#eee" } }
                },
                {
                    "data": {
                        "url": "data/londonCentroids.json",
                        "format": { "type": "json" }
                    },
                    "transform": [
                        {
                            "calculate": "indexof(datum.name,' ') > 0 ? substring(datum.name, 0, indexof(datum.name, ' ')) : datum.name",
                            "as": "bLabel"
                        }
                    ],
                    "mark": "text",
                    "encoding": {
                        "longitude": { "field": "cx", "type": "quantitative" },
                        "latitude": { "field": "cy", "type": "quantitative" },
                        "text": { "field": "bLabel", "type": "nominal" },
                        "size": { "value": 8 },
                        "opacity": { "value": 0.6 }
                    }
                },
                {
                    "data": {
                        "url": "data/londonTubeLines.json",
                        "format": { "type": "topojson", "feature": "line" }
                    },
                    "mark": { "type": "geoshape", "filled": false, "strokeWidth": 2 },
                    "encoding": {
                        "color": {
                            "field": "id",
                            "type": "nominal",
                            "legend": { "title": null, "orient": "bottom-right", "offset": 0 },
                            "scale": {
                                "domain": [
                                    "Bakerloo", "Central", "Circle", "District", "DLR",
                                    "Hammersmith & City", "Jubilee", "Metropolitan",
                                    "Northern", "Piccadilly", "Victoria", "Waterloo & City"
                                ],
                                "range": [
                                    "rgb(137,78,36)", "rgb(220,36,30)", "rgb(255,206,0)",
                                    "rgb(1,114,41)", "rgb(0,175,173)", "rgb(215,153,175)",
                                    "rgb(106,114,120)", "rgb(114,17,84)", "rgb(0,0,0)",
                                    "rgb(0,24,168)", "rgb(0,160,226)", "rgb(106,187,170)"
                                ]
                            }
                        }
                    }
                }
            ]
        };
        vegaEmbed('#londonMap', londonMapSpec);
    </script>
</body>
</html>
